@model PortafolioEPIS.Models.Tbl_DetalleCargaAcademica
@{
    Layout = null;
    ViewBag.Title = "ListaPDFPortafolioU3";
    List<PortafolioEPIS.Models.Tbl_PruebaEntrada> pruebaEntrada = ViewBag.Prueba;
    List<PortafolioEPIS.Models.Tbl_Portafolio> Portafolio = ViewBag.Portafolio;
    List<PortafolioEPIS.Models.Tbl_Material> listaMaterial = ViewBag.ListarEvidencia;
    int idCodigoPortafolio = 0;
    int evaluados = 0;
}

<meta name="viewport" content="width=device-width" />
<title>Lista PDF PortafolioU3</title>
<link href="~/assets/Informes/portafolio.css" rel="stylesheet" />

<table>
    <tr>
        <td rowspan="2"><img src="~/assets/Informes/logo_pdf.PNG" width="220" height="60" /></td>
    </tr>
</table>
<span><h2><strong><u>MATERIALES A CONSIGNAR PARA EL PORTAFOLIO</u></strong></h2></span>
<span><h2><strong><u>III UNIDAD</u></strong></h2></span>

<table>
    <tr>
        <th width="19%" style="text-align:left">Codigo del Curso:</th>
        <td width="15%"><input type="text" style="text-align:center; background-color:#F2E2C4; border: 1px solid #000" value="@Model.Tbl_DetallePlanEstudio.CodigoCurso_DetallePlanEstudio" size="15" /></td>
        <th width="18%" style="text-align:right">Seccion:</th>
        <td width="15%"><input type="text" style="text-align:center; background-color:#F2E2C4; border: 1px solid #000" value="@Model.Tbl_Seccion.Nombre_Seccion" size="15" /></td>
        <th width="18%" style="text-align:right">Ciclo:</th>
        <td width="15%"><input type="text" style="text-align:center; background-color:#FFF; border: 1px solid #000" value="@Model.Tbl_DetallePlanEstudio.Ciclo_DetallePlanEstudio" size="15" /></td>
    </tr>
    <tr>
        <th width="19%" style="text-align:left">Nombre del Curso:</th>
        <td colspan="5"><input type="text" style=" background-color:#FFF; border: 1px solid #000; width:100%;" value="@Model.Tbl_DetallePlanEstudio.Asignatura_DetallePlanEstudio" /></td>
    </tr>
    <tr>
        <th width="19%" style="text-align:left">Horas:</th>
        <td width="15%"><input type="text" style="text-align:center; background-color:#FFF; border: 1px solid #000" value="@Model.Tbl_DetallePlanEstudio.TotalHoras_DetallePlanEstudio" size="15" /></td>
        <th width="18%" style="text-align:right">Créditos:</th>
        <td width="15%"><input type="text" style="text-align:center; background-color:#FFF; border: 1px solid #000" value="@Model.Tbl_DetallePlanEstudio.TotalCreditos_DetallePlanEstudio" size="15" /></td>
        <th width="18%" style="text-align:right">Tipo Curso:</th>
        <td width="15%"><input type="text" style="text-align:center; background-color:#FFF; border: 1px solid #000" value="@Model.Tbl_DetallePlanEstudio.TipoCurso_DetallePlanEstudio" size="15" /></td>
    </tr>
    <tr>
        <th width="19%" style="text-align:left">Docente:</th>
        <td colspan="5"><input type="text" style=" background-color:#FFF; border: 1px solid #000; width:100%;" value="@Model.Tbl_Docente.Nombres_Docente , @Model.Tbl_Docente.Apellidos_Docente" /></td>
    </tr>
</table>
<table class="table">
    <tr>
        <td>
            <div id="lateral">
                <table>
                    <tr>
                        <th width="23%" style="text-align:left;background-color:#FFF;">Semestre:</th>
                        <td width="15%"><input type="text" style="text-align:center; background-color:#F2E2C4; border: 1px solid #000" value="@Model.Tbl_Semestre.Nombre_Semestre" size="15" /></td>
                        <th width="18%" style="text-align:right;background-color:#FFF;"></th>
                    </tr>
                </table>
                <strong>Resumen del Curso para la Unidad:</strong>
                @{
                    int retirados = 0;
                    int abandono = 0;
                    int aprobados = 0;
                    int asisten = 0;
                    asisten = (Model.Matriculados_DetalleCargaAcademica - @retirados - @abandono);
                }
                @foreach (var p in Portafolio)
                {
                    if (p.Codigo_DetalleCargaAcademica == Model.Codigo_DetalleCargaAcademica && p.Unidad_Portafolio == "UI")
                    {
                        idCodigoPortafolio = p.Codigo_Portafolio;
                        retirados = int.Parse((p.Retirados_Portafolio).ToString());
                        abandono = int.Parse((p.Abandono_Portafolio).ToString());
                        aprobados = int.Parse((p.Aprobados_Portafolio).ToString());
                    }
                }
                <table border="1" class="table">
                    <tr>
                        <th>Estudiantes</th>
                        <th>Cantidad</th>
                        <th>Porcentaje</th>
                    </tr>
                    <tr>
                        <td>Matriculados</td>
                        <td style="text-align:center;background-color:#F2E2C4;">@Model.Matriculados_DetalleCargaAcademica</td>
                        <td style="text-align:center;">100%</td>
                    </tr>

                    <tr>
                        <td>Retirados</td>
                        <td style="text-align:center;background-color:#F2E2C4;">@retirados</td>
                        <td style="text-align:center;">@(Math.Round((Convert.ToDouble(retirados) * 100) / Convert.ToDouble(Model.Matriculados_DetalleCargaAcademica), 2))</td>
                    </tr>
                    <tr>
                        <td>Abandono</td>
                        <td style="text-align:center;background-color:#F2E2C4;">@abandono</td>
                        <td style="text-align:center;">@(Math.Round((Convert.ToDouble(abandono) * 100) / Convert.ToDouble(Model.Matriculados_DetalleCargaAcademica), 2))</td>
                    </tr>
                    <tr>
                        <td>Asisten</td>
                        <td style="text-align:center;">@asisten</td>
                        <td style="text-align:center;">@(Math.Round((Convert.ToDouble(asisten) * 100) / Convert.ToDouble(Model.Matriculados_DetalleCargaAcademica), 2))</td>
                    </tr>
                    <tr>
                        <td>Aprobados</td>
                        <td style="text-align:center;background-color:#F2E2C4;">@aprobados</td>
                        <td style="text-align:center;">@(Math.Round((Convert.ToDouble(aprobados) * 100) / Convert.ToDouble(Model.Matriculados_DetalleCargaAcademica), 2))</td>
                    </tr>
                    <tr>
                        <td>Desaprobados</td>
                        <td style="text-align:center;">@(asisten - aprobados)</td>
                        <td style="text-align:center;">@(Math.Round((Convert.ToDouble(asisten - aprobados) * 100) / Convert.ToDouble(Model.Matriculados_DetalleCargaAcademica), 2))</td>
                    </tr>
                </table>
            </div>
        </td>
        <td>
            <div id="principal">
                <table class="table">
                    <tr>
                        <td>
                            <img src="~/assets/Informes/asistencia_estudiantes.png" style="min-width: 200px; height: 300px; max-width: 400px; margin: 0 auto" />
                        </td>
                    </tr>

                </table>
            </div>
        </td>
    </tr>
</table>

<table class="table">
    <tr>
        <td>
            <img src="~/assets/Informes/situacion-general.png" style="min-width: 350px; height: 300px; max-width: 400px; margin: 0 auto" />
        </td>

        <td>
            <img src="~/assets/Informes/rendimiento.png" style="min-width: 300px; height: 300px; max-width: 400px; margin: 0 auto" />
        </td>

    </tr>
</table>

<table class="table2">
    <tr>
        <td><strong>I. Material que el docente prepara y entrega a los estudiantes durante la ejecución de los cursos:</strong></td>
    </tr>
    <tr>
        <td><p>El material deberá estar asociado a los resultados del aprendizaje definidos en la planificación del curso</p></td>
    </tr>
    <tr>
        <td><p><font color="red">(Marcar con un X en las columnas <b>Digital</b> y/o <b>Impreso</b> siempre y cuando tenga evidencia)</font></p></td>
    </tr>
</table>
<table class="table" border="1">
    <thead>
        <tr>
            <th width="5%">#</th>
            <th width="50%">Material Docente Entregado</th>
            <th width="15%">Digital</th>
            <th width="15%">Impreso</th>
            <th width="15%">Cantidad</th>
        </tr>
    </thead>
    @{int con = 0; }
    <tbody>
        @foreach (var list in listaMaterial)
        {
            if (list.Tipo_Material == "DOCENTEUIII" && list.Codigo_Portafolio == idCodigoPortafolio)
            {
                con = con + 1;
                <tr>
                    <td>@con</td>
                    <td>@list.Nombre_Material</td>
                    <td>@list.Estado_Material</td>
                    <td>@list.Cantidad_Material</td>
                    <td>@list.Archivo_Material</td>
                </tr>
            }
        }
    </tbody>
</table>
<br />
<table class="table2">
    <tr>
        <td><strong>II. Material generado por el estudiante en el transcurso del semestre: </strong></td>
    </tr>
    <tr>
        <td>
            <p>
                El material deberá estar asociado a los resultados del aprendizaje definidos en la planificacion del curso.
            </p>
        </td>
    </tr>
    <tr>
        <td><p><font color="red">(Marcar con un X en las columnas <b>Digital</b> y/o <b>Impreso</b> siempre y cuando tenga evidencia)</font></p></td>
    </tr>
</table>
<table class="table" border="1">
    <thead>


        <tr>
            <th width="5%">#</th>
            <th width="50%">Material Docente Entregado</th>
            <th width="15%">Digital</th>
            <th width="15%">Impreso</th>
            <th width="15%">Cantidad</th>
        </tr>
    </thead>
    @{ int con1 = 0;}
    <tbody>
        @foreach (var list1 in listaMaterial)
        {
            if (list1.Tipo_Material == "ESTUDIANTEUIII" && list1.Codigo_Portafolio == idCodigoPortafolio)
            {
                con1 = con1 + 1;
                <tr>
                    <td>@con1</td>
                    <td>@list1.Nombre_Material</td>
                    <td>@list1.Estado_Material</td>
                    <td>@list1.Cantidad_Material</td>
                    <td>@list1.Archivo_Material</td>
                </tr>
            }
        }
    </tbody>
</table>

<p> Fecha: @DateTime.Parse((DateTime.Now).ToString()).ToShortDateString()</p>
<br /><br />


<center><p>___________________________________</p></center>
<center><p> @Model.Tbl_Docente.Nombres_Docente , @Model.Tbl_Docente.Apellidos_Docente</p></center>
